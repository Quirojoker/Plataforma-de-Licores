{% load static %}
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Mi Licorera</title>
        <meta name="description" content="Compra cervezas, vinos y licores online, con entrega rápida en tu ciudad.">

        <!-- Tags OG para compartir-->
        <meta property="og:title" content="Valhalla - Licores Premium">
        <meta property="og:description" content="Compra cervezas, vinos y licores online">
        <meta property="og:image" content="{% static 'tienda/img/valhalla.jpeg' %}">
        <meta property="og:url" content="{{ request.build_absolute_uri }}">
        <meta property="og:type" content="website">

        <!-- Favicon-->
        <link rel="icon" type="image/png" href="{% static 'tienda/img/favicon-32x32.png' %}">

        <!-- Font Awesome CSS -->
        <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Fuente Cinzel de Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

        <!-- slick css-->
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />

        <!-- Estilos -->
        <link rel="stylesheet" href="{% static 'css/global.css' %}">
        <link rel="stylesheet" href="{% static 'tienda/css/main.css' %}">
    </head>

    <body>
        {% if messages %}
            {% for message in messages %}
            <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}success{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        {% endif %}

        <div id="main-site-content">
            <!-- Barra de navegación-->
            <header class="header loaded">
                <nav class="navbar navbar-expand-lg">
                    <div class="container">
                        <a class="navbar-brand" href="{% url 'inicio' %}">
                            <img src="{% static 'tienda/img/logo.png' %}" alt="Vikinga" class="logo">
                            <span class="ms-2 fw-bold fs-4">Valhalla</span>
                        </a>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon">
                            </span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="#Nuestras-Categorías">Categorías</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Productos</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=2 %}">Cervezas Comerciales</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=3 %}">Cervezas Artesanles</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=4 %}">Vinos Comerciales</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=5 %}">Vinos Artesanales</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=9 %}">Aguardiente</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=10 %}">Ron</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=11 %}">Whisky</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=8 %}">Sangría</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="#Nuestras-Promociones">Promociones</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="#Nuestras-Recetas">Recetas</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="{% url 'contacto' %}">Contacto</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </header>


            <!-- Checkout -->
            <section id="checkout-page" class="mt-5 pt-4">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-7">
                            <div class="schedule-box-2 p-3 rounded-3 mb-4">
                                <h3 class="mb-4">Información de entrega</h3>
                                <form id="checkout-form" method="POST" action="{% url 'procesar_pedido' %}">
                                    {% csrf_token %}
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label>Nombre completo *</label>
                                            <input type="text" name="nombre" required class="form-control-1">
                                        </div>
                                        <div class="col-md-6">
                                            <label>Teléfono *</label>
                                            <input type="tel" name="telefono" required class="form-control-1">
                                        </div>
                                    </div>
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label>Email</label>
                                            <input type="email" name="email" class="form-control-1">
                                        </div>
                                        <div class="col-md-6">
                                            <label>Ciudad *</label>
                                            <input type="text" name="ciudad" value="Cali" readonly class="form-control-1">
                                        </div>
                                    </div>
                                    
                                    <!-- Horario de entrega -->
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label>Zona de Cali *</label>
                                            <select name="zona_entrega" class="form-control-1" required>
                                                <option value="norte">Zona Norte</option>
                                                <option value="sur">Zona Sur</option>
                                                <option value="oriente">Zona Oriente</option>
                                                <option value="occidente">Zona Occidente</option>
                                                <option value="centro">Centro</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label>Tipo de entrega *</label>
                                            <select name="tipo-entrega" class="form-control-1" id="tipo-entrega" required>
                                                <option value="express">Express (Hoy mismo 40-60 min)</option>
                                                <option value="programada">Entrega Programada</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Campos para entrega programada (ocultos inicialmente) -->
                                    <div id="programada-fields" style="display: none;">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label>Fecha de entrega *</label>
                                                <input type="date" name="fecha_entrega" class="form-control-1" id="fecha-programada">
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label>Hora de entrega *</label>
                                                <select name="hora_entrega" class="form-control-1" required>
                                                    <option value="08:00">8:00 AM</option>
                                                    <option value="09:00">9:00 AM</option>
                                                    <option value="10:00">10:00 AM</option>
                                                    <option value="11:00">11:00 AM</option>
                                                    <option value="12:00">12:00 PM</option>
                                                    <option value="13:00">1:00 PM</option>
                                                    <option value="14:00">2:00 PM</option>
                                                    <option value="15:00">3:00 PM</option>
                                                    <option value="16:00">4:00 PM</option>
                                                    <option value="17:00">5:00 PM</option>
                                                    <option value="18:00">6:00 PM</option>
                                                    <option value="19:00">7:00 PM</option>
                                                    <option value="20:00">8:00 PM</option>
                                                    <option value="21:00">9:00 PM</option>
                                                    <option value="22:00">10:00 PM</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-12 mb-3">
                                            <label>Dirección completa *</label>
                                            <textarea name="direccion" required class="form-control-1" placeholder="Ej: Carrera 10 #20-30, Barrio Granada"></textarea>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-12 mb-3">
                                            <label>Instrucciones especiales (opcional)</label>
                                            <textarea name="instrucciones" class="form-control-1" placeholder="Ej: Timbre 2 veces, unidad Valhalla apt 501, dejar en porteria"></textarea>
                                        </div>
                                    </div>
                                    
                                    <!-- Método de pago -->
                                    <div class="payment-methods mb-3">
                                        <h3>Método de pago</h3>
                                        <div class="payment-options">
                                            <label class="d-block mb-2 border p-2 rounded" style="border-color: var(--primary-color) !important;">
                                                <input type="radio" name="metodo_pago" value="efectivo"  class="me-2" required>
                                                Efectivo (Contra entrega)
                                            </label>
                                            <div>
                                                <button type="submit" class="btn d-block mx-auto w-50 mb-4" id="confirmar-pedido-btn" style="display: none;">
                                                    Confirmar Pedido
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Columna derecha: Resumen del pedido -->
                        <div class="col-lg-5">
                            <div class="schedule-box-2 p-3 rounded-3">
                                <div class="card-header text-center">
                                    <h3 class="mb-3">Tu Pedido</h3>
                                </div>
                                <div class="card-body">
                                    <div id="checkout-items" class="mb-4">
                                        <table class="table table-borderless table-dark" style="background-color: #1a1a1a !important;">
                                            <thead>
                                                <tr>
                                                    <th style="color: var(--primary-color);">Producto</th>
                                                    <th class="text-center" style="color: var(--primary-color);">Cantidad</th>
                                                    <th class="text-center" style="color: var(--primary-color);">Precio</th>
                                                    <th class="text-end" style="color: var(--primary-color);">Subtotal</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for item in items %}
                                                <tr>
                                                    <td><strong>{{ item.producto.nombre }}</strong></td>
                                                    <td class="text-center">{{ item.cantidad }}</td>
                                                    <td class="text-center"><strong>${{ item.precio|floatformat:0 }}</strong></td>
                                                    <td class="text-end" style="color: var(--primary-color);"><strong>${{ item.subtotal|floatformat:0 }}</strong></td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="summary-totals">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Subtotal:&nbsp; </span> 
                                        <strong id="subtotal-general" style="color: var(--primary-color);"> ${{ subtotal_carrito|floatformat:0 }}</strong>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Envío: </span>
                                        <span>¡Gratis!</span>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between mb-3">
                                        <strong>Total: </strong>
                                        <strong id="total-general" style="color: var(--primary-color);">${{ total_carrito|floatformat:0 }}</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Categorias-->
            <section id="Nuestras-Categorías" class="slider-products pt-6 pb-6">
                <div class="container">
                    <div class="text-center">
                        <h6>Nuestras Categorías</h6>
                        <h2>Explora Nuestra Variedad de Licores</h2>
                    </div>
                    <div class="slider-category">
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=2 %}">
                                <img src="{% static 'tienda/img/poker-botella.png' %}" alt="poker-botella" class="poker-botella">
                                <div class="cat-text">Cervezas <br> comerciales</div>
                            </a>
                        </div>
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=3 %}">
                                <img src="{% static 'tienda/img/cerveza-artesanal.png' %}" alt="cerveza-artesanal" class="cerveza-artesanal">
                                <div class="cat-text">Cervezas <br> Artesanales</div>
                            </a>
                        </div>
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=4 %}">
                                <img src="{% static 'tienda/img/vino-comercial.png' %}" alt="vino-comercial" class="vino-comercial">
                                <div class="cat-text">Vinos <br> Comerciales</div>
                            </a>
                        </div>
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=5 %}">
                                <img src="{% static 'tienda/img/vino-artesanal.png' %}" alt="vino-artesanal" class="vino-artesanal">
                                <div class="cat-text">Vinos <br> Artesanales</div>
                            </a>
                        </div>
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=9 %}">
                                <img src="{% static 'tienda/img/aguardiente.png' %}" alt="aguardiente" class="aguardiente">
                                <div class="cat-text">Aguardiente</div>
                            </a>
                        </div>
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=10 %}">
                                <img src="{% static 'tienda/img/ron.png' %}" alt="ron" class="ron">
                                <div class="cat-text">Rón</div>
                            </a>
                        </div>
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=11 %}"> 
                                <img src="{% static 'tienda/img/whisky.png' %}" alt="whisky" class="whisky">
                                <div class="cat-text">Whisky</div>
                            </a>
                        </div>
                        <div class="slides-cat">
                            <a href="{% url 'categoria_productos' categoria_id=8 %}">
                                <img src="{% static 'tienda/img/sangría-1.png' %}" alt="sangría-1" class="sangría-1">
                                <div class="cat-text">Sangría</div>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recetas img-->
            <section id="Nuestras-Recetas" class="image-cta-sec py-4">
                <div class="container">
                    <a href="#" class="cta-recipe-link">
                        <img src="{% static 'tienda/img/Recetas.png' %}" alt="Explora la Mixología"
                            class="img-fluid cta-recipe-image">
                    </a>
                </div>
            </section>
            
            <!-- Promociones-->
            <section class="slider-products pt-6 pb-6" id="Nuestras-Promociones">
                <div class="container">
                    <div class="tittle text-center">
                        <h6 class="descuento">Descuentos en Licores</h6>
                        <h2 class="especiales"><span>¿Buscas precios realmente especiales?</span></h2>
                    </div>
                    <div class="slider-category">
                        {% for producto in productos_promocion %}
                        <div>
                            <div class="product-box-1">
                                <div class="pr-img-1 d-flex align-items-center justify-content-center">
                                    <a href="{% url 'detalle_productos' producto_id=producto.id %}">
                                        {% if producto.imagen %}
                                        <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" class="img-fluid" style="max-height: 200px; width: auto;">
                                        {% else %}
                                        <img src="{% static 'tienda/img/Vino-de-Mora-Alto-Cielo-750ml.png' %}" alt="Vino-de-Mora-Alto-Cielo-750ml" class="Vino-de-Mora-Alto-Cielo-750ml">
                                        {% endif %}
                                    </a>
                                </div>
                                <div>
                                    <div class="pr-text p-3 text-center">
                                        <h3>{{ producto.nombre }}</h3>
                                        {% if producto.precio_promocional %}
                                        <del>$ {{ producto.precio_excesivo|floatformat:0 }}</del>
                                        <p>$ {{ producto.precio_promocional|floatformat:0 }}</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>   
                </div>
            </section>

            <!-- WhatsApp Bubble -->
            <!-- Reemplaza '1234567890' con tu número de teléfono con el código de país. -->
            <!-- Reemplaza 'Hola!%20Me%20interesa%20un%20producto%20de%20su%20página.' con el mensaje que quieras. -->
            <a href="https://wa.me/1234567890?text=Hola!%20Me%20interesa%20un%20producto%20de%20su%20página."
                class="whatsapp-bubble" target="_blank">
                <i class="fab fa-whatsapp"></i>
            </a>

            <!-- Footer -->
            <hr>
            <footer class="text-white pt-5 pb-4">
                <div class="container text-center text-md-start">
                    <div class="row text-center text-md-start">

                        <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                            <h5 class="text-uppercase mb-4 font-weight-bold text-warning">
                                <a class="text-decoration-none text-white" href="#">
                                    <img src="{% static 'tienda/img/logo.png' %}" alt="Vikinga" class="logo">
                                    Valhalla
                                </a>
                            </h5>
                            <p>Licores y Sabores unicos</p>
                        </div>

                        <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                            <h5 class="text-uppercase mb-4 font-weight-bold text-white">Enlaces</h5>
                            <p>
                                <a href="#Nuestras-Categorías" class="text-white">Categorías</a>
                            </p>
                            <p>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Productos</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=2 %}">Cervezas Comerciales</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=3 %}">Cervezas Artesanles</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=4 %}">Vinos Comerciales</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=5 %}">Vinos Artesanales</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=9 %}">Aguardiente</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=10 %}">Ron</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=11 %}">Whisky</a></li>
                                        <li><a class="dropdown-item" href="{% url 'categoria_productos' categoria_id=8 %}">Sangría</a></li>
                                    </ul>
                                </li>
                            </p>
                            <p>
                                <a href="#" class="text-white">Recetas</a>
                            </p>
                            <p>
                                <a href="#Nuestras-Promociones" class="text-white">Promociones</a>
                            </p>
                            <p>
                                <a href="{% url 'contacto' %}" class="text-white">Contacto</a>
                            </p>
                        </div>

                        <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                            <h5 class="text-uppercase mb-4 font-weight-bold text-white">Contacto</h5>
                            <p class="text-nowrap">
                                <i class="fas fa-home me-3"></i> Calle 61 Norte #2FN - 88, Cali, Colombia
                            </p>
                            <p class="text-nowrap">
                                <i class="fas fa-envelope me-3"></i> sebastianarangoquiroga@gmail.com
                            </p>
                            <p>
                                <i class="fas fa-phone me-3"></i> 300 379 9997 - 311 611 2595
                            </p>
                            <p class="text-nowrap">
                                <i class="fab fa-whatsapp fa-lg me-3"></i> +57 300 379 9997 - +57 311 611 2595</a>
                            </p>

                        </div>

                        <hr class="mb-4 mt-5">
                        <div class="row d-flex justify-content-center">
                            <div class="col-md-7 col-lg-8">
                                <p class="text-center text-md-start">© 2025 Valhalla | Todos los derechos reservados</p>
                            </div>
                            <div class="col-md-5 col-lg-4">
                                <div class="text-center text-md-end">
                                    <ul class="list-unstyled list-inline">
                                        <li class="list-inline-item">
                                            <a href="#" class="btn-floating btn-sm text-white"><i class="fab fa-facebook-f fa-lg"></i></a>
                                        </li>
                                        <li class="list-inline-item">
                                            <a href="#" class="btn-floating btn-sm text-white"><i class="fab fa-instagram fa-lg"></i></a>
                                        </li>
                                        <li class="list-inline-item">
                                            <a href="#" class="btn-floating btn-sm text-white"><i class="fab fa-linkedin-in fa-lg"></i></a>
                                        </li>
                                        <li class="list-inline-item">
                                            <a href="#" class="btn-floating btn-sm text-white"><i class="fab fa-github fa-lg"></i></a>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-12 text-center">
                                <a href="{% url 'terminos_y_condiciones' %}" class="text-white me-3 text-decoration-underline">Términos y Condiciones</a>
                                <a href="{% url 'politica_de_privacidad' %}" class="text-white me-3 text-decoration-underline">Política de Privacidad</a>
                                <a href="{% url 'politica_de_cookies' %}" class="text-white text-decoration-underline">Política de Cookies</a>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-12 col-sm-6 mx-auto text-center">
                                <p class="m-0 small">El exceso de alcohol es perjudicial para la salud. ley 30 de 1986.
                                    Prohibase el expendio de bebidas embriagantes a menores de edad y mujeres embarazadas.
                                    Ley 124 de 1994</p>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
        
        <!--script de Jquery-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

        <!--script para cargar el header-->
        <script>
            $(document).ready(function() {
                $('header').addClass('loaded');
                $('#main-site-content').show();
            });
        </script>

        <!--script de bootstraps-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

        <!--script de slick-->
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

        <!--script de simpleParallax-->
        <script src="https://cdn.jsdelivr.net/npm/simple-parallax-js@5.6.2/dist/simpleParallax.min.js"></script>

        <!--script local js-->
        <script src="{% static 'tienda/local.js' %}"></script>
    </body>
</html>